CSMA平均重传次数

[计算机网络（第7版）——谢希仁 课后习题3-26_平均重传次数如何计算-CSDN博客](https://blog.csdn.net/Clover_pofu/article/details/105061957)

# 第六章

### UDP和TCP长度

udp首部8 tcp首部20 IP首部20

[网络-UDP，TCP数据包的最大传输长度分析_udp最大传输多少字节-CSDN博客](https://blog.csdn.net/flybirddizi/article/details/73065667)

## FTP

### FTP的整个流程

FTP（文件传输协议）的整个流程可以分为几个主要步骤。以下是一个典型的FTP会话流程，包括控制连接和数据连接的建立与使用：
1. **建立控制连接**：
   - 客户端发起一个到服务器FTP端口（默认为21号端口）的TCP连接。
   - 服务器接受连接，建立控制连接，用于在客户端和服务器之间交换命令和响应。
2. **用户认证**：
   - 客户端通过控制连接发送`USER`命令，后跟用户名，到服务器。
   - 服务器响应，通常要求客户端发送`PASS`命令和密码进行认证。
   - 客户端发送`PASS`命令和密码（密码以隐式方式发送，不会在命令行显示）。
   - 服务器验证用户名和密码，如果认证成功，允许客户端访问；否则，拒绝访问。
3. **设置传输模式**：
   - 客户端可能需要发送`TYPE`命令来指定数据的类型（如ASCII或二进制）和格式。
4. **建立数据连接**：
   - 根据客户端是使用主动模式还是被动模式，数据连接的建立方式不同。
   - **主动模式（PORT）**：
     - 客户端发送`PORT`命令，指定自己的IP地址和端口号（通常是大于1024的随机端口），等待服务器连接。
     - 服务器接收到`PORT`命令后，会从自己的数据端口（通常是20号端口）主动连接到客户端指定的端口，建立数据连接。
   - **被动模式（PASV）**：
     - 客户端发送`PASV`命令，请求服务器打开一个数据端口并进入被动模式。
     - 服务器选择一个随机端口，并通过控制连接发送给客户端（通常是在一个`227 Entering Passive Mode`响应中）。
     - 客户端接收到服务器的端口号后，主动连接到服务器指定的端口，建立数据连接。
5. **文件传输**：
   - 一旦数据连接建立，客户端可以发送命令来请求文件列表（如`NLST`或`LIST`命令），上传文件（如`STOR`命令），或下载文件（如`RETR`命令）。
   - 如果是下载文件，服务器会通过数据连接发送文件数据到客户端。
   - 如果是上传文件，客户端会通过数据连接发送文件数据到服务器。
6. **结束会话**：
   - 文件传输完成后，数据连接会被关闭。
   - 客户端可以通过发送`QUIT`命令来结束FTP会话。
   - 服务器响应`221 Goodbye`，然后关闭控制连接。
     在整个FTP会话中，控制连接始终开放，用于客户端和服务器之间的命令和响应交换。数据连接则根据需要建立和关闭，用于实际的文件数据传输。FTP的这种设计允许命令和数据传输分离，提高了协议的灵活性和效率。

### FTP指令

在FTP客户端中，有许多指令可用于与FTP服务器进行交互和文件操作。以下是一些常见的FTP指令及其用途：

基本指令

1. **`open`** - 连接到FTP服务器。
   ```sh
   open ftp.example.com
   ```

2. **`user`** - 登录到FTP服务器，提供用户名。
   ```sh
   user username
   ```

3. **`pass`** - 登录到FTP服务器，提供密码。
   ```sh
   pass password
   ```

4. **`bye`** 或 **`quit`** - 断开与FTP服务器的连接。
   ```sh
   bye
   quit
   ```

#### 文件和目录操作

1. **`ls`** 或 **`dir`** - 列出当前目录的文件和子目录。
   ```sh
   ls
   dir
   ```

2. **`cd`** - 更改当前工作目录。
   ```sh
   cd directory_name
   ```

3. **`lcd`** - 更改本地计算机上的当前工作目录。
   ```sh
   lcd local_directory_name
   ```

4. **`get`** - 从服务器下载文件到本地计算机。
   ```sh
   get remote_file local_file
   ```

5. **`mget`** - 下载多个文件。
   ```sh
   mget remote_file1 remote_file2
   ```

6. **`put`** - 上传本地文件到服务器。
   ```sh
   put local_file remote_file
   ```

7. **`mput`** - 上传多个文件。
   ```sh
   mput local_file1 local_file2
   ```

8. **`delete`** - 删除服务器上的文件。
   ```sh
   delete remote_file
   ```

9. **`mdelete`** - 删除多个文件。
   ```sh
   mdelete remote_file1 remote_file2
   ```

10. **`mkdir`** - 在服务器上创建新目录。
    ```sh
    mkdir directory_name
    ```

11. **`rmdir`** - 删除服务器上的目录。
    ```sh
    rmdir directory_name
    ```

#### 会话和连接控制

1. **`status`** - 显示当前连接的状态。
   ```sh
   status
   ```

2. **`pwd`** - 显示服务器上的当前工作目录。
   ```sh
   pwd
   ```

3. **`passive`** - 切换到被动模式。
   ```sh
   passive
   ```

4. **`active`** - 切换到主动模式。
   ```sh
   active
   ```

5. **`binary`** - 切换到二进制模式，用于传输非文本文件。
   ```sh
   binary
   ```

6. **`ascii`** - 切换到ASCII模式，用于传输文本文件。
   ```sh
   ascii
   ```

#### 高级指令

1. **`rename`** - 重命名服务器上的文件。
   ```sh
   rename old_name new_name
   ```

2. **`size`** - 获取服务器上文件的大小。
   ```sh
   size remote_file
   ```

3. **`mdtm`** - 获取服务器上文件的最后修改时间。
   ```sh
   mdtm remote_file
   ```

4. **`help`** 或 **`?`** - 显示可用命令列表或特定命令的帮助信息。
   ```sh
   help
   help command
   ```

这些指令在大多数FTP客户端中都可以使用。使用这些命令时，请确保输入的文件和目录名称准确无误，并且具有必要的权限执行相应的操作。